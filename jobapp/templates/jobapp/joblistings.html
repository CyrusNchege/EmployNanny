{% extends 'jobapp/base.html' %} {% block content %}

<style>
  .employer {
    font-size: 1.2rem;
    font-family: Arial, sans-serif;
    text-transform: capitalize;
  }
</style>
<h2 class="text-center">All Job Listings</h2>
{% if messages %}
<div class="alert alert-warning">
  {% for message in messages %} {{ message }} {% endfor %}
</div>
{% endif %}
<div class="container" style="max-width: 90%">
  <div class="row justify-content-center mb-4 px-6">
    {% for job in jobs %}
    <div class="col-md-4 mb-4">
      <div class="card h-100">
        <div class="card-body">
          <h5 class="card-title">{{ job.category }}</h5>
          <h6 class="card-subtitle mb-2 text-muted">
            Posted by <span class="employer">{{ job.employer.username }}</span>
          </h6>
          {% if job.payment_status == 'verified' %}
          <div class="payment-verified" style="color: #0275d8">
            Payment verified
          </div>
          {% else %}
          <div class="payment-unverified">Payment unverified</div>
          {% endif %}
          <p class="card-text">{{ job.job_description|truncatechars:200 }}</p>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">City: {{ job.city }}</li>
            <li class="list-group-item">Address: {{ job.address }}</li>
            <li class="list-group-item">Salary: {{ job.salary }}</li>
            <li class="list-group-item">Duration: {{ job.duration }}</li>
            <li class="list-group-item">Start Date: {{ job.start_date }}</li>
          </ul>
          <div class="card-body d-flex justify-content-between align-items-end">
            <a
              href="{% url 'job_detail' job_id=job.pk %}"
              class="card-link float-left"
              >View >></a
            >
            <a
              href="{% url 'apply_for_job' job_id=job.pk %}"
              class="card-link ml-auto"
              >Apply</a
            >
          </div>
          {% if request.user == job.employer %}
          <div
            class="card-body d-flex justify-content-between align-items-start"
          >
            <a
              href="{% url 'edit_job' job_id=job.pk %}"
              class="btn btn-info btn-sm mr-2"
              >Edit</a
            >
            <a
              href="{% url 'job_applications' job.id %}"
              class="btn btn-info btn-sm mr-2"
              >View Applications</a
            >
          </div>
          <form
            action="{% url 'delete_job' pk=job.pk %}"
            method="POST"
            class="card-body mt-2"
          >
            {% csrf_token %}
            <button type="submit" class="btn btn-danger btn-sm">Delete</button>
          </form>
          {% endif %}
        </div>
      </div>
    </div>
    {% if forloop.counter|divisibleby:3 %}
  </div>
  <div class="row justify-content-center">{% endif %} {% endfor %}</div>
</div>
{% endblock %}
